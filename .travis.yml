language: python
python:
- '3.6'
- '3.7'
- '3.8'
before_install:
- pip install -U pip setuptools
install:
- pip install pipenv
- pipenv install --dev
script:
- invoke build.install-package
- invoke test.lint
- invoke test.security
- invoke unit.pytest
- invoke integration.version
- invoke integration.expand-policy
- invoke integration.scan
deploy:
  provider: pypi
  user: __token__
  password:
    secure: TvOVTnTbxOgahH5zNU8rvqSrwtXsItmF64zKNRGaw0pxqZz80ot/6MBbsvOgBJCFffbp9+xcOokJ5m2gAiUM5itGP6KhU5eeZXGQV770OHM8RnaEIQB28/qqkpw1rCE+cXnx4eYFYonEbThhfevAqjHWzJ3fUa0+LDCd5LfbYHtV7Yq6dvetwXBAc6mu9lJTCUW9Ik7o7fgojSCFWv7R7lRJkkoLHOrkWT7QfRIU3E1YSQY3DHmwnV8IYdkoD7JdYxxeN2HLGTuM0K9s88u0KApyE9Bj5lHBqJxXgJBkoX5Vf+eUdkWu4MxrezO9jOCANAYACpkV1Kb2VUh/rKV82pnwA0IvwKQJ8T5Ym5Lq8yo+KBz8tWaU68K7em2TqpeONsvkuR0N8iWxQfoyTVS/9nncmPUaNRNNNZjzPBHB1buZuFjlZJTA3X2yv3RHd0fXQzSWWXjWmTCLOa3mxIt/ZHw/6PQKInG2vg45wD04yQVuvu5ASkw5MI+8jW6BicMNmRvbpj+GH/LLQwa0nS6+EKBH4/5vMmj7dWVsU/hid6mutvJ3vkvlcb18njizFxQUiFD7KwUY9/mrPhkJOiBXSoCwPW4ENWlpDTT0tZpTbk7VEdwIpGn47B7PK/NwF71z9fpKt1a1D3dH1b2U4g7zvi4a2E5EmLDh7oXjV4RPHlo=
  distributions: sdist bdist_wheel
  skip_existing: true
  on:
    tags: true
    branch: master
    python: 3.6
